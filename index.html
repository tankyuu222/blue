<style>
  @media screen and (max-width: 600px) {
    body { font-size: 1.4rem; }
    .card { font-size: 12vw; }
    #startBtn, #formLink a { font-size: 5vw; }
  }
</style>
</head>
<body>

<div id="instruction">
  これから英字20個を順番にフラッシュカードのように表示しますので、できる限り覚えてください。。書いたり声に出して覚えるのはやめてください。あとでgoogleフォームにて覚えたものを選択してください。準備ができたら「開始」を押してください。
</div>

<div id="card" class="card"></div>
<button id="startBtn">開始</button>

<div id="formLink" style="display:none; margin-top:20px;">
  <a href="https://docs.google.com/forms/d/1pG20utGjSGL5yE7nPXYbkBnP846w6ZxKvKunSWZc1Jw/viewform" target="_blank">
    回答フォームへ
  </a>
</div>

<script>
  const allStimuli = [
    {letter: 'bk', color: '#000055'},
    {letter: 'dw', color: '#0000aa'},
    {letter: 'gs', color: '#3333ff'},
    {letter: 'ih', color: '#6666ff'},
    {letter: 'ku', color: '#9999ff'},
    {letter: 'md', color: '#000055'},
    {letter: 'py', color: '#6666ff'},
    {letter: 'rz', color: '#9999ff'},
    {letter: 'sl', color: '#3333ff'},
    {letter: 'tf', color: '#0000aa'},
    {letter: 'uj', color: '#000055'},
    {letter: 'vl', color: '#6666ff'},
    {letter: 'xw', color: '#9999ff'},
    {letter: 'yz', color: '#3333ff'},
    {letter: 'cq', color: '#0000aa'},
    {letter: 'nh', color: '#000055'},
    {letter: 'ps', color: '#3333ff'},
    {letter: 'rt', color: '#9999ff'},
    {letter: 'wx', color: '#6666ff'},
    {letter: 'fg', color: '#0000aa'}
  ];

  const startStimuli = allStimuli.slice(0,2); // ab, cd
  const endStimuli = allStimuli.slice(4,6);   // ij, kl
  const middleStimuli = allStimuli.filter(s => !startStimuli.includes(s) && !endStimuli.includes(s));
  
  // 中間16個をシャッフル
  function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [array[i], array[j]] = [array[j], array[i]];
    }
  }
  shuffleArray(middleStimuli);
  
  const displaySequence = [...startStimuli, ...middleStimuli, ...endStimuli];

  const cardDiv = document.getElementById('card');
  const startBtn = document.getElementById('startBtn');
  let current = 0;
  let intervalId;

  function showNextCard() {
    if(current < displaySequence.length){
      const item = displaySequence[current];
      cardDiv.textContent = item.letter;
      cardDiv.style.color = item.color;
      current++;
    } else {
      clearInterval(intervalId);
      cardDiv.textContent = "表示終了！";
      document.getElementById('formLink').style.display = 'block';
    }
  }

  startBtn.addEventListener('click', () => {
    startBtn.style.display = 'none';
    showNextCard();
    intervalId = setInterval(showNextCard, 2000); // 2秒ごとに表示
  });
</script>

</body>
</html>
